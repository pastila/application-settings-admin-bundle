{% extends "base.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    {# <link rel="stylesheet" href="/landing/css/app.css"> #}
    {# стили которые собираются дефолтной задачей gulp #}
    <link rel="stylesheet" href="/local/templates/kdteam/pages/landing/landing.min.css">
    <link rel="stylesheet" href="/local/templates/kdteam/pages/lichniy-cabinet/my-reviews.min.css">
{% endblock %}

{% block main %}
    <div class="lk">
        {{ include('@App/Lk/_menu.html.twig', { activeMenuItemAlias: 'reviews'}) }}
        <div class="lk__title">Мои отзывы</div>
        <div class="lk__content">
            <div class="lk__content__big-content lk-border">
                <div class="lk__content__big-content__title">
                    Мои отзывы
                </div>
                <div class="lk__content__big-content__my-reviews">
                    {% for review in reviews %}
                        <div class="review-item">
                            <div class="review-item__info">
                                {% set emptyStars = 5 - review.valuation %}
                                {% set fullStars = review.valuation %}
                                {% if fullStars %}
                                    {% for i in range(1, fullStars) %}
                                        <img src="{{ asset('gulp/images/svg/lk-my-reviews-review-star-active.svg') }}">
                                    {% endfor %}
                                {% endif %}
                                {% if emptyStars > 0 %}
                                    {% for i in range(1, emptyStars) %}
                                        <img src="{{ asset('gulp/images/svg/lk-my-reviews-review-star.svg') }}">
                                        {% set j = i %}
                                    {% endfor %}
                                {% endif %}

                                <div class="review-item__info__date">
                                    {{ review.createdAt|prepareDate('j F Y') }}
                                </div>
                                {% if review.moderationStatus == constant('AppBundle\\Entity\\Company\\FeedbackModerationStatus::MODERATION_NONE') %}
                                <div class="review-item__info__status">
                                    На модерации
                                </div>
                                {% elseif review.moderationStatus == constant('AppBundle\\Entity\\Company\\FeedbackModerationStatus::MODERATION_REJECTED') %}
                                <div class="review-item__info__status">
                                    Отклонено
                                </div>
                                {% endif %}
                            </div>
                            <div class="review-item__text">
                                {{ review.text }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="lk__content__small-content">
                <div class="lk__content__small-content__new-review lk-border">
                    <a href="{{ path('app_insurancecompany_feedback_new') }}" class="btn2">Новый отзыв</a>
                    <div class="lk__content__small-content__new-review__description">
                        Если у вас есть опыт обращения к своему страховому представителю, опишите его, вне зависимости
                        от того, положительный он или отрицательный.
                    </div>
                </div>
            </div>
        </div>
        <a href="{{ path('lk_index') }}" class="lk__button btn2">В личный кабинет</a>
    </div>
{% endblock %}
