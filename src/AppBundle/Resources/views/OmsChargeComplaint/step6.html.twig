{% extends "base.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    {# <link rel="stylesheet" href="/landing/css/app.css"> #}
    {# стили которые собираются дефолтной задачей gulp #}
    <link rel="stylesheet" href="/local/templates/kdteam/pages/landing/landing.min.css">
    <link rel="stylesheet" href="/local/templates/kdteam/pages/oms-charge-complaint/main.min.css">
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">urlPrefix = '{{ app.request.getBaseURL() }}'
    </script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/dist/bundle.js"></script>
    <script src="/local/templates/kdteam/pages/oms-charge-complaint/main.min.js"></script>
{% endblock %}


{% block main %}
    <div class="app__content">
        <div class="roadmap">
            <div class="roadmap__wrap">
                <div class="roadmap__item">
                    <div class="roadmap__item__image">
                        <div class="step-number">2</div>
                    </div>
                </div>
                <div class="roadmap__item">
                    <div class="roadmap__item__image">
                        <div class="step-number">3</div>
                    </div>
                    <div class="roadmap__item__description">Каким было обращение</div>
                </div>
                <div class="roadmap__item">
                    <div class="roadmap__item__image">
                        <div class="step-number">4</div>
                    </div>
                    <div class="roadmap__item__description">Заболевание</div>
                </div>
                <div class="roadmap__item">
                    <div class="roadmap__item__image">
                        <div class="step-number">5</div>
                    </div>
                    <div class="roadmap__item__description">Результат</div>
                </div>
                <div class="roadmap__item roadmap__item_current ">
                    <div class="roadmap__item__image">
                        <img src="{{ asset('gulp/images/svg/oms-charge-complaint-roadmap-step6.svg') }}">
                    </div>
                    <div class="roadmap__item__description">Оформить обращение</div>
                </div>
            </div>
        </div>
        <div class="form">
            <div class="formarea">
                <div class="formarea__title">
                    Данные пациента
                </div>
                {% form_theme form '@App/form/form_oms.html.twig' %}

                {{ form_start(form) }}
                    <div class="formarea__form-field">
                        {{ form_row(form.patient.lastName, {'attr': {'placeholder': 'Фамилия'}}) }}
                        {{ form_row(form.patient.firstName, {'attr': {'placeholder': 'Имя'}}) }}
                        {{ form_row(form.patient.middleName, {'attr': {'placeholder': 'Отчество'}}) }}
                        {{ form_row(form.patient.birthDate, {'attr': {'placeholder': 'Дата рождения'}}) }}
                        {{ form_row(form.patient.insurancePolicyNumber, {'attr': {'placeholder': 'Номер полиса'}}) }}
                        {{ form_row(form.patient.region, {'attr': {'placeholder': 'Регион страховой компании'}}) }}
                        {{ form_row(form.patient.insuranceCompany, {'attr': {'placeholder': 'Страховая компания'}}) }}
                        {{ form_row(form.paidAt, {'attr': {'placeholder': 'Дата оплаты услуги'}}) }}
{#                        <div class="form-item form-item_file-field">#}
{#                            <button type="button"><img#}
{#                                        src="{{ asset('gulp/images/svg/oms-charge-complaint-file-blank.svg') }}"/>#}
{#                            </button>#}
{#                            <div class="form-item_file-field__file-info">Скан квитанции.pdf <br> 1.1 MB</div>#}
{#                            <button type="button"><img#}
{#                                        src="{{ asset('gulp/images/svg/oms-charge-complaint-file-trash.svg') }}"/>#}
{#                            </button>#}
{#                        </div>#}
                        <div class="form-item">
{#                            <input type="file" id="file-input" multiple accept="image/jpeg,image/pdf" required>#}
                            {{ form_errors(form.documents) }}
                            {{ form_widget(form.documents) }}
                            <label for="{{ form.documents.vars.id }}" class="file-input-label">
                                <div class="file-input-label__description">Перенесите или <a>Загрузите</a>
                                    сюда документы об оплате
                                </div>
                                <div class="file-input-label__description file-input-label__description_mobile"><a>Загрузите</a>
                                    документы об оплате
                                </div>
                                <div class="file-input-label__file-types">jpeg или pdf</div>
                            </label>
                        </div>
                        <div class="form-item form-item_phone-field{% if form_errors(form.patient.phone) %} form-item_error{% endif %}">
                            <div class="form-item_phone-field__question-mark">
                                <img src="{{ asset('gulp/images/svg/oms-charge-complaint-question-grey.svg') }}" title="Укажите телефон заявителя обращения">
                            </div>
                            {{ form_widget(form.patient.phone, {'attr': {'placeholder': '+7 (xxx) xxx-xx-xx', 'pattern':'7[0-9]{10}'}}) }}
                            {{ form_errors(form.patient.phone) }}
                        </div>
                        <div class="form-item{% if form_errors(form.verifySmsCode) %} form-item_error{% endif %}">
                            {{ form_widget(form.verifySmsCode, {'attr': {'placeholder': 'SMS-код'}}) }}
                            <div class="form-item__exist">
                                <a href="#">Посмотреть сформированное обращение</a>
                                {% if form_errors(form.verifySmsCode) %}
                                <div class="form-item__error-message">{{ form_errors(form.verifySmsCode) }}</div>
                                {% endif %}
                            </div>
                            <button class="form-item__send-code-button">Подтвердить</button>
                            <button class="form-item__send-code-button form-item__send-code-button-again">Отправить ещё раз <img
                                        src="{{ asset('gulp/images/svg/oms-charge-complaint-refresh-icon.svg') }}"></button>
                        </div>
                    </div>
                    <div class="formarea__buttonarea">
                        <div class="formarea__buttonarea__buttons">
                            <button class="btn2 formarea__buttonarea__buttons__prev-button"><img
                                        src="{{ asset('gulp/images/svg/oms-charge-complaint-prev-step-arrow.svg') }}">Назад
                            </button>
                            <button class="btn2 formarea__buttonarea__buttons__next-button">Отправить обращение<img
                                        src="{{ asset('gulp/images/svg/oms-charge-complaint-next-step-arrow.svg') }}">
                            </button>
                        </div>
                        <div class="formarea__buttonarea__description">Нажимая на кнопку «Отправить обращение» вы
                            соглашаетесь
                            с&nbsp;<a href="{{ setting('personal_data') }}">политикой&nbsp;конфиденциальности</a> и правилами <a href="{{ setting('agreement') }}">предоставления
                                услуг</a></div>
                    </div>
                {{ form_end(form) }}
            </div>
            <input id="sidebar-expand" type="checkbox" class="formarea-description-sidebar-expand">
            <label for="sidebar-expand" class="formarea-description-sidebar-expand-label"><img src="{{ asset('gulp/images/svg/oms-charge-complaint-sidebar-expand.svg') }}"></label>
            <div class="formarea__description">
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Регион</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.region ? complaintDraft.region.name : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Год оказания услуги</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.year }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Медицинская организация</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.medicalOrganization ? complaintDraft.medicalOrganization.name : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Обращение</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.urgent ? 'Неотложное' : 'Плановое' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Заболевание</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.disease ? complaintDraft.disease.name : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Фамилия</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.patient ? complaintDraft.patient.lastName : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Имя</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.patient ? complaintDraft.patient.firstName : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Телефон</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.patient ? complaintDraft.patient.phone : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Регион</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.patient ? complaintDraft.patient.region : '' }}</div>
                </div>
                <div class="formarea__description__item">
                    <div class="formarea__description__item__formfield-name">Страховая компания</div>
                    <div class="formarea__description__item__formfield-value">{{ complaintDraft.patient ? complaintDraft.patient.insuranceCompany : '' }}</div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
