!function(){"use strict";class e{constructor(e){this.popupElement=e}open(){if(!this.popupElement.querySelector(".feedback_form")){const e=()=>{$.ajax({dataType:"html",url:"contact_us",type:"GET",beforeSend:function(){},success:e=>{this.popupElement.insertAdjacentHTML("beforeend",e),this.submitForm(t)},error:()=>{this.popupElement.querySelector(".feedback_form")||(this.popupElement.insertAdjacentHTML("beforeend",'<form class="feedback_form"></form>'),this.popupElement.querySelector("form").insertAdjacentHTML("beforeend",'<p class="popup-write-us__error-message">Произошла ошибка попробуйте повторить позже</p>'))}}).done((function(e){}))},t=e=>{const t=e?"addEventListener":"removeEventListener";this.popupElement[t]("click",o),this.popupElement[t]("click",s),document[t]("keydown",i)};this.popupElement.style.display="flex",e(this.popupElement);const o=e=>{const o=e.target,s=this.popupElement.querySelector(".close-modal"),i=this.popupElement.querySelector(".close-modal img");o!==s&&o!==i||(this.close(),t(!1))},s=e=>{e.target===this.popupElement&&(e.preventDefault(),this.close(),t(!1))},i=e=>{"Escape"===e.key&&(e.preventDefault(),this.close(),t(!1))};t(!0)}}close(){this.popupElement.querySelector(".feedback_form")&&(this.popupElement.style.display="none",this.popupElement.querySelector(".feedback_form").remove())}submitForm(e){this.popupElement.querySelector("form")&&this.popupElement.querySelector("form").addEventListener("submit",(t=>{t.preventDefault(),$.ajax({url:"contact_us",type:"POST",beforeSend:function(){},data:$(this.popupElement.querySelector("form")).serialize(),success:()=>{this.close(),e(!1)},error:()=>{this.popupElement.querySelector(".popup-write-us__error-message")||(this.popupElement.querySelector(".popup__wrap").remove(),this.popupElement.querySelector("form").insertAdjacentHTML("beforeend",'<p class="popup-write-us__error-message">Произошла ошибка попробуйте повторить позже</p>'))}}).done((function(e){}))}))}}$((function(){$.exists=function(e){return $(e).length>0},$(".app-header__menu-button").on("click",(function(e){e.preventDefault(),$(this).hasClass("is-opened")?($(window).scrollTop(),$(this).removeClass("is-opened"),$("body").removeClass("nav-active")):($(this).addClass("is-opened"),$("body").addClass("nav-active"))})),$(window).on("scroll",(function(e){$(window).scrollTop()>0?$(".app-header").addClass("is-fixed"):$(".app-header").removeClass("is-fixed"),$(window).scrollTop()>=$(".b-return").offset().top-$(".b-return").outerHeight()&&$(".b-return").addClass("is-visible"),$(window).scrollTop()>=$(".b-question").offset().top-$(".b-question").outerHeight()&&$(".b-question").addClass("is-visible"),$(window).scrollTop()>=$(".b-first").offset().top-$(".b-first").outerHeight()&&$(".b-first, .app-header").addClass("is-visible"),$(window).scrollTop()>=$(".b-work").offset().top-$(".b-work").outerHeight()&&$(".b-work").addClass("is-visible"),$(window).scrollTop()>=$(".b-rating").offset().top-$(".b-rating").outerHeight()&&$(".b-rating").addClass("is-visible"),$(window).scrollTop()>=$(".b-reviews").offset().top-$(".b-reviews").outerHeight()&&$(".b-reviews").addClass("is-visible"),$(window).scrollTop()>=$(".b-insider").offset().top-$(".b-insider").outerHeight()&&$(".b-insider").addClass("is-visible"),$(window).scrollTop()>=$(".b-info").offset().top-$(".b-info").outerHeight()&&$(".b-info").addClass("is-visible")})).trigger("scroll"),function(){const e=$("[data-remodal-id=loacation]").remodal();$(".js-loacation").on("click",(function(t){t.preventDefault(),e&&e.open()}));const t=$("[data-remodal-id=error-modal]").remodal();$(".l-list__item a").on("click",(function(o){o.preventDefault(),e&&e.close(),$.get(`${urlPrefix}/select-location`,{region_id:o.target.dataset.region}).done((e=>{1===e?($(".js-location").html($(this).html()),window.location.reload()):t&&t.open()})).fail((()=>{t&&t.open()}))}))}(),$(".js-scroll").on("click",(function(e){e.preventDefault(),$(".nav-active, .app-header__menu-button").removeClass("nav-active is-opened"),$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top-100},700)})),$(".b-first__button").on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".b-first").outerHeight()},700)})),$("select").styler(),window.Scrollbar.init(document.querySelector(".jq-selectbox__dropdown ul"),{alwaysShowTracks:!0}),$(".b-insider__slider").length&&tns({container:".b-insider__slider",items:3.3,loop:!0,mouseDrag:!0,autoWidth:!0,speed:400,nav:!1,controls:!1}),$(".b-question__item-title").on("click",(function(e){e.preventDefault();var t=$(this).closest(".b-question__item");t.toggleClass("is-opened"),t.find(".b-question__item-text").slideToggle()})),$(".b-reviews__slider").length&&tns({container:".b-reviews__slider",items:3.3,loop:!0,mouseDrag:!0,autoWidth:!0,speed:400,nav:!1,controls:!1});var t=$("html, body"),o=$(".page-scroller"),s="page-scroller--memorized",i="page-scroller--visible",n=0,r=!1;function l(){setTimeout((function(){window.pageYOffset>60?o.addClass(i):o.hasClass(s)||o.removeClass(i)}),150),r||(n=0,o.removeClass(s)),r=!1}o.length>0&&(window.addEventListener("scroll",l,!!window.supportsPassive&&{passive:!0}),o.on("click",(function(e){e.preventDefault(),window.removeEventListener("scroll",l),window.pageYOffset>0&&0===n?(r=!0,n=window.pageYOffset,o.addClass(s),t.stop().animate({scrollTop:0},500,"swing",(function(){window.addEventListener("scroll",l,!!window.supportsPassive&&{passive:!0})}))):(o.removeClass(s),t.stop().animate({scrollTop:n},500,"swing",(function(){n=0,window.addEventListener("scroll",l,!!window.supportsPassive&&{passive:!0})})))}))),function(){const t=document.querySelector(".app-footer__contact-us-btn"),o=document.querySelector(".popup-write-us");t&&o&&t.addEventListener("click",(function(){const t=new e(o);t.open(),t.submitForm()}))}()}))}();