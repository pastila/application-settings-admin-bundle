!function(){"use strict";class e{constructor(e){this.popupElement=e}open(){if(!this.popupElement.querySelector(".feedback_form")){const e=()=>{$.ajax({dataType:"html",url:"contact_us",type:"GET",beforeSend:function(){},success:e=>{this.popupElement.insertAdjacentHTML("beforeend",e),this.submitForm(t)},error:()=>{this.popupElement.querySelector(".feedback_form")||(this.popupElement.insertAdjacentHTML("beforeend",'<form class="feedback_form"></form>'),this.popupElement.querySelector("form").insertAdjacentHTML("beforeend",'<p class="popup-write-us__error-message">Произошла ошибка попробуйте повторить позже</p>'))}}).done((function(e){}))},t=e=>{const t=e?"addEventListener":"removeEventListener";this.popupElement[t]("click",o),this.popupElement[t]("click",n),document[t]("keydown",r)};this.popupElement.style.display="flex",e(this.popupElement);const o=e=>{const o=e.target,n=this.popupElement.querySelector(".close-modal"),r=this.popupElement.querySelector(".close-modal img");o!==n&&o!==r||(this.close(),t(!1))},n=e=>{e.target===this.popupElement&&(e.preventDefault(),this.close(),t(!1))},r=e=>{"Escape"===e.key&&(e.preventDefault(),this.close(),t(!1))};t(!0)}}close(){this.popupElement.querySelector(".feedback_form")&&(this.popupElement.style.display="none",this.popupElement.querySelector(".feedback_form").remove())}submitForm(e){this.popupElement.querySelector("form")&&this.popupElement.querySelector("form").addEventListener("submit",(t=>{t.preventDefault(),$.ajax({url:"contact_us",type:"POST",beforeSend:function(){},data:$(this.popupElement.querySelector("form")).serialize(),success:()=>{this.close(),e(!1)},error:()=>{this.popupElement.querySelector(".popup-write-us__error-message")||(this.popupElement.querySelector(".popup__wrap").remove(),this.popupElement.querySelector("form").insertAdjacentHTML("beforeend",'<p class="popup-write-us__error-message">Произошла ошибка попробуйте повторить позже</p>'))}}).done((function(e){}))}))}}!function(){const e=$("[data-remodal-id=loacation]").remodal();$(".js-loacation").on("click",(function(t){t.preventDefault(),e&&e.open()}));const t=$("[data-remodal-id=error-modal]").remodal();$(".l-list__item a").on("click",(function(o){o.preventDefault(),e&&e.close(),$.get(`${urlPrefix}/select-location`,{region_id:o.target.dataset.region}).done((e=>{1===e?($(".js-location").html($(this).html()),window.location.reload()):t&&t.open()})).fail((()=>{t&&t.open()}))}))}(),function(){const t=document.querySelector(".app-footer__contact-us-btn"),o=document.querySelector(".popup-write-us");t&&o&&t.addEventListener("click",(function(){const t=new e(o);t.open(),t.submitForm()}))}(),window.location.pathname===`${urlPrefix}/contact_us`&&function(){const t=document.querySelector(".popup-write-us");t&&setTimeout((()=>{const o=new e(t);o.open(),o.submitForm()}),2e3)}()}();