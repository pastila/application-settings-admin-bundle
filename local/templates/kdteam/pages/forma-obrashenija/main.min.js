function update_hospital_select(){var e,t,n,s,i,l,c;for(e=document.getElementsByClassName("custom-select"),t=0;t<2;t++){for(s=e[t].getElementsByTagName("select")[0],(i=document.createElement("DIV")).setAttribute("class","select-selected"),i.innerHTML=s.options[s.selectedIndex].innerHTML,e[t].appendChild(i),(l=document.createElement("DIV")).setAttribute("class","select-items select-hide"),n=1;n<s.length;n++)(c=document.createElement("DIV")).innerHTML=s.options[n].innerHTML,c.setAttribute("value",s.options[n].value),s.options[n].id?c.setAttribute("id",s.options[n].id):c.setAttribute("id","option"),c.addEventListener("click",function(e){var t,n,s,i,l;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],l=this.parentNode.previousSibling,n=0;n<i.length;n++)if(i.options[n].innerHTML==this.innerHTML){if(i.selectedIndex=n,l.innerHTML=this.innerHTML,!(l.clientWidth<310))return;{const e=l.textContent.slice(0,15)+"...";l.innerHTML=e}for(t=this.parentNode.getElementsByClassName("same-as-selected"),s=0;s<t.length;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}l.click()}),l.appendChild(c);e[t].appendChild(l),i.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}document.addEventListener("click",closeAllSelect)}function update_select(){var e,t,n,s,i,l,c;for(e=document.getElementsByClassName("custom-select"),t=2;t<e.length;t++){for(s=e[t].getElementsByTagName("select")[0],(i=document.createElement("DIV")).setAttribute("class","select-selected"),i.innerHTML=s.options[s.selectedIndex].innerHTML,e[t].appendChild(i),(l=document.createElement("DIV")).setAttribute("class","select-items select-hide"),n=1;n<s.length;n++)(c=document.createElement("DIV")).innerHTML=s.options[n].innerHTML,c.setAttribute("value",s.options[n].value),s.options[n].id?c.setAttribute("id",s.options[n].id):c.setAttribute("id","option"),c.addEventListener("click",function(e){var t,n,s,i,l;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],l=this.parentNode.previousSibling,n=0;n<i.length;n++)if(i.options[n].innerHTML==this.innerHTML){if(i.selectedIndex=n,l.innerHTML=this.innerHTML,!(l.clientWidth<310))return;{const e=l.textContent.slice(0,15)+"...";l.innerHTML=e}for(t=this.parentNode.getElementsByClassName("same-as-selected"),s=0;s<t.length;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}l.click()}),l.appendChild(c);e[t].appendChild(l),i.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}document.addEventListener("click",closeAllSelect)}function create_select(){var e,t,n,s,i,l,c;for(e=document.getElementsByClassName("custom-select"),t=0;t<e.length;t++){for(s=e[t].getElementsByTagName("select")[0],(i=document.createElement("DIV")).setAttribute("class","select-selected"),i.innerHTML=s.options[s.selectedIndex].innerHTML,e[t].appendChild(i),(l=document.createElement("DIV")).setAttribute("class","select-items select-hide"),n=1;n<s.length;n++)(c=document.createElement("DIV")).innerHTML=s.options[n].innerHTML,c.setAttribute("value",s.options[n].value),s.options[n].id?c.setAttribute("id",s.options[n].id):c.setAttribute("id","option"),c.addEventListener("click",function(e){var t,n,s,i,l;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],l=this.parentNode.previousSibling,n=0;n<i.length;n++)if(i.options[n].innerHTML==this.innerHTML){if(i.selectedIndex=n,l.innerHTML=this.innerHTML,!(l.clientWidth<310))return;{const e=l.textContent.slice(0,15)+"...";l.innerHTML=e}for(t=this.parentNode.getElementsByClassName("same-as-selected"),s=0;s<t.length;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}l.click()}),l.appendChild(c);e[t].appendChild(l),i.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}document.addEventListener("click",closeAllSelect)}function closeAllSelect(e){var t,n,s,i=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),s=0;s<n.length;s++)e==n[s]?i.push(s):n[s].classList.remove("select-arrow-active");for(s=0;s<t.length;s++)i.indexOf(s)&&t[s].classList.add("select-hide")}$(document).ready(function(){create_select();let e,t=$("#urgent"),n=$("#planned");n.click(function(){n.is(":checked")&&(t.prop("checked",!1),e="Плановое")}),t.click(function(){t.is(":checked")&&(n.prop("checked",!1),e="Неотложное")}),$(document).on("click","#strax-sluchay",function(){let t=$("#appeal-form"),n=$("#page-title");$.post("/ajax/diagnoz.php",{APPEAL_VALUE:e},function(e){var s=jQuery.parseJSON(e);t.replaceWith(s.DIAGNOZ),n.html(s.FULL_NAME)},"html")}),$(document).on("click","#option",function(){let e=$(this).attr("value"),t=$(".grid"),n=$(this).attr("id");e&&"option"===n&&$.post("/ajax/main_form_oms.php",{id:e},function(e){$(t).html(e),update_select()},"html")}),$(document).on("click","#location",function(){let e=$(this).attr("value"),t=$(this).text(),n=$("#hospitals"),s=$("#region_name"),i=$(this).attr("id");e&&"location"===i&&$.post("/ajax/form_hospitals.php",{id:e},function(e){$(n).html(e),$(s).html(t),$("#hosptital_name").html("Не выбрано"),update_hospital_select()},"html")}),$(document).on("click","#hospital",function(){let e=$(this).text(),t=$("#hosptital_name");$(t).html(e)})});