window.addEventListener("DOMContentLoaded",()=>{var e,t,a,n,i,s,c;for(e=document.getElementsByClassName("custom-select"),t=0;t<e.length;t++){for(n=e[t].getElementsByTagName("select")[0],(i=document.createElement("DIV")).setAttribute("class","select-selected"),i.innerHTML=n.options[n.selectedIndex].innerHTML,e[t].appendChild(i),(s=document.createElement("DIV")).setAttribute("class","select-items select-hide"),s.setAttribute("onchange","select-items select-hide"),a=1;a<n.length;a++){if(console.log(n.options[a].attributes.class),(c=document.createElement("DIV")).innerHTML=n.options[a].innerHTML,c.innerVALUE=n.options[a].value,void 0!==n.options[a].attributes.class){var o=n.options[a].attributes.class.value;c.setAttribute("class",o)}c.setAttribute("data-value",c.innerVALUE),c.addEventListener("click",function(e){var t,a,n,i,s;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],s=this.parentNode.previousSibling,a=0;a<i.length;a++)if(i.options[a].innerHTML==this.innerHTML){if(i.selectedIndex=a,s.innerHTML=this.innerHTML,!(s.clientWidth<350))return;{const e=s.textContent.slice(0,20)+"...";s.innerHTML=e}for(t=this.parentNode.getElementsByClassName("same-as-selected"),n=0;n<t.length;n++)t[n].removeAttribute("class");this.setAttribute("class","same-as-selected");break}s.click()}),s.appendChild(c)}e[t].appendChild(s),i.addEventListener("click",function(e){e.stopPropagation(),l(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function l(e){var t,a,n,i=[];for(t=document.getElementsByClassName("select-items"),a=document.getElementsByClassName("select-selected"),n=0;n<a.length;n++)e==a[n]?i.push(n):a[n].classList.remove("select-arrow-active");for(n=0;n<t.length;n++)i.indexOf(n)&&t[n].classList.add("select-hide")}document.addEventListener("click",l),document.querySelectorAll(".white_block").forEach(function(e){const t=e.querySelector(".feedback__bottom_link"),a=e.querySelector(".hidenComments"),n=e.querySelector(".comment-count");n&&n.innerText>0&&t&&t.addEventListener("click",function(e){this.classList.toggle("active"),t.classList.contains("active")?a.classList.add("active"):a.classList.remove("active")})}),$(document).on("click",".select-items div",function(){let e="/feedback/"+$(this).attr("data-value");window.open(e,"_self")}),$(".button-comments").click(function(e){let t=[];e.preventDefault();var a=$(this).attr("data-id-comment");let n=$(this).attr("data-id-comment"),i=$("[data-id-comment="+a+"]").val();""==i&&($(this).siblings(".danger").css({display:"block"}),t.push("text"));let s={id_review:n,message:i};0==t.length&&$.ajax({url:"/ajax/add-comment.php",type:"POST",data:s,beforeSend:function(){}}).done(function(e){1==e&&location.reload()})}),$(".button-cited").click(function(e){let t=[];e.preventDefault();var a=$(this).attr("data-id-cited");let n=$(this).attr("data-id-cited"),i=$("[data-id-cited="+a+"]").val();""==i&&($(this).siblings(".danger").css({display:"block"}),t.push("text"));let s={id_comment:n,message:i};0==t.length&&$.ajax({url:"/ajax/add_cited.php",type:"POST",data:s,beforeSend:function(){}}).done(function(e){1==e&&location.reload()})})}),$(document).ready(function(){$(".delet_cation").click(function(){var e={case:"cation",id:$(this).attr("data-id")};$.ajax({dataType:"html",url:"/ajax/delet_feedback.php",type:"POST",data:e,success:function(e){1==e&&window.location.reload()}})}),$(".delet_comment").click(function(){var e={case:"comment",id:$(this).attr("data-id")};$.ajax({dataType:"html",url:"/ajax/delet_feedback.php",type:"POST",data:e,success:function(e){1==e&&window.location.reload()}})}),$(".dalete_review").click(function(){var e={case:"review",id:$(this).attr("data-id")};$.ajax({dataType:"html",url:"/ajax/delet_feedback.php",type:"POST",data:e,success:function(e){1==e&&window.location.reload()}})}),$(".toggle_comment_dropdown").on("click",function(e){$(this).parent().toggleClass("openedBlock")}),$(".readmore-text").readmore({speed:75,collapsedHeight:150,moreLink:'<div class="readmore-text__block __shadow"><a class="readmore-text__block__link" href="#">Читать весь отзыв...</a></div>',lessLink:'<div class="readmore-text__block" id="hide-comment"><a class="readmore-text__block__link" href="#">Скрыть отзыв</a></div>',afterToggle:function(e,t,a){a||$("html, body").animate({scrollTop:t.offset().top},{duration:100})}})});